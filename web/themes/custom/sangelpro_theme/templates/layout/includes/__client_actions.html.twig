{# {{ drupal_block('sangel_product_catalog_counter') }}
{{ drupal_block('sangel_order_cart_counter') }} #}

  {% set current_route = current_route_name|default('') %}

  {% set client_actions = [
    {
      'key': 'catalog',
      'variant': 'catalog',
      'icon': 'catalog',
      'label': 'Mon Catalogue'|t,
      'url': path('sangel_core.client_catalogue'),
      'route': 'sangel_core.client_catalogue',
      'active_routes': [
        'sangel_core.client_catalogue'
      ],
      'counter': counter_selection,
      'has_counter': true
    },
    {
      'key': 'cart',
      'variant': 'cart',
      'icon': 'cart',
      'label': 'Mon Panier'|t,
      'url': path('sangel_core.client_cart'),
      'route': 'sangel_core.client_cart',
      'active_routes': [
        'sangel_core.client_cart'
      ],
      'counter': counter_cart,
      'has_counter': true
    },
    {
      'key': 'history',
      'variant': 'history',
      'icon': 'history',
      'label': 'Mon Historique'|t,
      'url': path('sangel_core.client_order_history'),
      'route': 'sangel_core.client_order_history',
      'active_routes': [
        'sangel_core.client_order_history'
      ]
    },
    {
      'key': 'logout',
      'variant': 'logout',
      'icon': 'logout',
      'label': 'DÃ©connexion'|t,
      'url': path('user.logout'),
      'route': 'user.logout'
    }
  ] %}

{% if logged_in %}

  {% for action in client_actions %}
    {% set attributes = create_attribute({'id': 'sangel_header_counter__' ~ action.key}) %}
    {% set is_active = false %}
    {% if action.active_routes is defined %}
      {% set is_active = current_route in action.active_routes %}
    {% elseif action.route is defined %}
      {% set is_active = action.route == current_route %}
    {% endif %}

    {{ include('@sangelpro_theme/components/header-counter.html.twig', {
      attributes: attributes,
      variant: action.variant,
      url: action.url,
      icon: action.icon,
      label: action.label,
      counter: action.counter|default(0),
      has_counter: action.has_counter,
      is_active: is_active
      }) }}
  {% endfor %}

{% else %}
  {% set current_route = current_route_name|default('') %}
  {% set login_attributes = create_attribute({'id': 'sangel_header_counter__login'}) %}
  {{ include('@sangelpro_theme/components/header-counter.html.twig', {
    attributes: login_attributes,
    variant: 'login',
    url: path('user.login'),
    icon: 'login',
    label: 'Connexion'|t,
    counter: 0,
    has_counter: false,
    is_active: current_route == 'user.login'
    }) }}
{% endif %}
